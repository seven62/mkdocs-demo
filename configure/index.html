



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Official ROCK Documentation">
      
      
      
        <meta name="author" content="RockNSM">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.1">
    
    
      
        <title>RockNSM</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.982221ab.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#configuration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="RockNSM" class="md-header-nav__button md-logo">
          
            <img src="../img/rock.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              RockNSM
            </span>
            <span class="md-header-nav__topic">
              Configure
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/rocknsm/rock-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    rocknsm/rock-docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="RockNSM" class="md-nav__button md-logo">
      
        <img src="../img/rock.png" width="48" height="48">
      
    </a>
    RockNSM
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/rocknsm/rock-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    rocknsm/rock-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../about/what_is_it/" title="What is ROCK" class="md-nav__link">
      What is ROCK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/backstory/" title="Backstory" class="md-nav__link">
      Backstory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/dataflow/" title="Data Flow" class="md-nav__link">
      Data Flow
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Install
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Install
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../install/requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install/media/" title="Media" class="md-nav__link">
      Media
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install/install/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Configure
      </label>
    
    <a href="./" title="Configure" class="md-nav__link md-nav__link--active">
      Configure
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hosts-file" title="Hosts File" class="md-nav__link">
    Hosts File
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-file" title="Config File" class="md-nav__link">
    Config File
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network-interface" title="Network Interface" class="md-nav__link">
    Network Interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensor-resource" title="Sensor Resource" class="md-nav__link">
    Sensor Resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-source" title="Installation Source" class="md-nav__link">
    Installation Source
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#online" title="Online" class="md-nav__link">
    Online
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#offline" title="Offline" class="md-nav__link">
    Offline
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-retention" title="Data Retention" class="md-nav__link">
    Data Retention
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rock-component-options" title="ROCK Component Options" class="md-nav__link">
    ROCK Component Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../deployment/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../usage/" title="Basic Operation" class="md-nav__link">
      Basic Operation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../usage/support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../services/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/bro/" title="Bro" class="md-nav__link">
      Bro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/stenographer/" title="Stenographer" class="md-nav__link">
      Stenographer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/suricata/" title="Suricata" class="md-nav__link">
      Suricata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/fsf/" title="FSF" class="md-nav__link">
      FSF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/filebeat/" title="Filebeat" class="md-nav__link">
      Filebeat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/logstash/" title="Logstash" class="md-nav__link">
      Logstash
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/elasticsearch/" title="Elasticsearch" class="md-nav__link">
      Elasticsearch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/kibana/" title="Kibana" class="md-nav__link">
      Kibana
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../services/docket/" title="Docket" class="md-nav__link">
      Docket
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/latest/" title="Latest Release" class="md-nav__link">
      Latest Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/tutorials/" title="Tutorials and Videos" class="md-nav__link">
      Tutorials and Videos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/liscense/" title="Liscense" class="md-nav__link">
      Liscense
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/contribution/" title="Contribution" class="md-nav__link">
      Contribution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../references/support.md" title="Commercial Support" class="md-nav__link">
      Commercial Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hosts-file" title="Hosts File" class="md-nav__link">
    Hosts File
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-file" title="Config File" class="md-nav__link">
    Config File
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network-interface" title="Network Interface" class="md-nav__link">
    Network Interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensor-resource" title="Sensor Resource" class="md-nav__link">
    Sensor Resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-source" title="Installation Source" class="md-nav__link">
    Installation Source
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#online" title="Online" class="md-nav__link">
    Online
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#offline" title="Offline" class="md-nav__link">
    Offline
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-retention" title="Data Retention" class="md-nav__link">
    Data Retention
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rock-component-options" title="ROCK Component Options" class="md-nav__link">
    ROCK Component Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/rocknsm/rock-docs/edit/master/docs/configure/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h1>
<p>After initial installation, your newly minted sensor will need to be configured
for your environment.  This can be done by logging in locally, or remotely via <code>ssh</code>.</p>
<blockquote>
<p>ROCK has been designed to require as little configuration as possible out of the
box. This document covers much of gear turning available to advanced users, but
please know up front that you can simply <strong><a href="../deployment/">run the deploy script</a></strong>
and get a working sensor.  </p>
</blockquote>
<p>With that said, let's get into the 2 main configuration files found in <code>/etc/rocknsm/</code>.  </p>
<h2 id="hosts-file">Hosts File<a class="headerlink" href="#hosts-file" title="Permanent link">&para;</a></h2>
<p>The first file you may want to edit is <code>/etc/rocknsm/hosts.ini</code>. This
file is an <a href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html">Ansible inventory</a> file that defines the target machines when
running a playbook.  </p>
<p>If you edit this file in a simple standalone sensor, you're essentially changing
the hostname of your sensor.  </p>
<!-- This is also where you break out server roles for more complex multi-node
deployments. If that fits your needs, see the multi-node clustering guide [here](#). -->

<div class="codehilite"><pre><span></span><span class="k">[rock]</span>
<span class="na">simplerockbuild.simplerock.lan ansible_host</span><span class="o">=</span><span class="s">127.0.0.1 ansible_connection=local</span>

<span class="k">[web]</span>
<span class="na">simplerockbuild.simplerock.lan ansible_host</span><span class="o">=</span><span class="s">127.0.0.1 ansible_connection=local</span>

<span class="k">[sensors:children]</span>
<span class="na">rock</span>

<span class="k">[bro:children]</span>
<span class="na">sensors</span>
<span class="na">...</span>
<span class="na">...</span>
<span class="na">...</span>
</pre></div>


<p>As you can see in the above example, the default hostname is <code>simplerockbuild.simplerock.lan</code>.
To customize this, simply replace <em>all</em> simplerock entries with your own.  </p>
<h2 id="config-file">Config File<a class="headerlink" href="#config-file" title="Permanent link">&para;</a></h2>
<p>The next file (<a href="https://github.com/rocknsm/rock/blob/master/playbooks/templates/rock_config.yml.j2">/etc/rocknsm/config.yml</a>) drives
the Ansible playbook and contains key variables like network interface setup,
cpu cores assignment, and much more.  There are a lot of options to tune here so
take time to familiarize.  Let's break down this file into it's major sections:  </p>
<h3 id="network-interface">Network Interface<a class="headerlink" href="#network-interface" title="Permanent link">&para;</a></h3>
<p>As mentioned previously, ROCK takes the interface with an ip address / gateway and will use that as the <em>management</em> NIC. <code>config.yml</code> displays the remaining interfaces that will be used to <strong>MONITOR</strong> traffic.</p>
<p>Let's run through a basic example:  </p>
<div class="codehilite"><pre><span></span>[admin@rock ~]$ ip a

1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether ...
    inet 192.168.1.207/24 brd 192.168.1.255 scope global noprefixroute dynamic enp0s3
    ...
3: enp0s4: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether ...
</pre></div>


<p>The demo box above has 2 NICs:<br />
1. <code>enp0s3</code> - is plugged in for install and deployment with an ip address from local dhcp. This will be used to <strong>manage</strong> the sensor<br />
2. <code>enp0s4</code> - will be unused (not connected) during install and deployment and be listed as a <code>rock_monif</code> in the config file</p>
<p>The config file shows the other interface (<code>enp0s3</code>) is listed as MONITOR interface.</p>
<div class="codehilite"><pre><span></span># interfaces that should be configured for sensor applications
rock_monifs:
    - enp0s3
</pre></div>


<h3 id="sensor-resource">Sensor Resource<a class="headerlink" href="#sensor-resource" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span># Set the hostname of the sensor:
rock_hostname: rocknsm_sensor_1

# Set the Fully Qualified Domain Name:
rock_fqdn: rocknsm_sensor_1.rocknsm.lan

# Set the number of CPUs assigned to Bro:
bro_cpu: 2

# Set the Elasticsearch cluster name:
es_cluster_name: rocknsm

# Set the Elasticsearch cluster node name:
es_node_name: localhost

# Set the value of Elasticsearch memory:
es_mem: 5
</pre></div>


<h3 id="installation-source">Installation Source<a class="headerlink" href="#installation-source" title="Permanent link">&para;</a></h3>
<p>We've taken into consideration that your sensor won't always have internet
access.  Currently the default value is set to <code>rock_online_install: True</code>:  </p>
<div class="codehilite"><pre><span></span>  # The primary installation variable defines the ROCK installation method:
  # ONLINE:   used if the system may reach out to the internet
  # OFFLINE:  used if the system may *NOT* reach out to the internet
  # The default value &quot;False&quot; will deploy using OFFLINE (local) repos.
  # A value of &quot;True&quot; will perform an install using ONLINE mirrors.

  rock_online_install: True
</pre></div>


<h4 id="online">Online<a class="headerlink" href="#online" title="Permanent link">&para;</a></h4>
<p>Does your sensor has access to <a href="https://imgs.xkcd.com/comics/the_cloud.png">upstream</a>
online repositories? If so, then make sure that this value is set to
<code>rock_online_install: True</code>.  </p>
<h4 id="offline">Offline<a class="headerlink" href="#offline" title="Permanent link">&para;</a></h4>
<p>If you are in an offline environment, then set it to <code>rock_online_install: False</code>.
Ansible will deploy using the locally cached files found in <code>/srv/rocknsm</code>.</p>
<p><br></p>
<blockquote>
<p>Note: In our next release the default behavior will be changed to an offline
install (reference <a href="https://github.com/rocknsm/rock/issues/376">Issue #376</a>)</p>
</blockquote>
<h3 id="data-retention">Data Retention<a class="headerlink" href="#data-retention" title="Permanent link">&para;</a></h3>
<p>This section controls how long NSM data stay on the sensor:  </p>
<div class="codehilite"><pre><span></span># Set the interval in which Elasticsearch indexes are closed:
elastic_close_interval: 15

# Set the interval in which Elasticsearch indexes are deleted:
elastic_delete_interval: 60

# Set value for Kafka retention (in hours):
kafka_retention: 168

# Set value for Bro log retention (in days):
bro_log_retention: 0

# Set value for Bro statistics log retention (in days):
bro_stats_retention: 0

# Set how often logrotate will roll Suricata log (in days):
suricata_retention: 3

# Set value for FSF log retention (in days):
fsf_retention: 3
</pre></div>


<h3 id="rock-component-options">ROCK Component Options<a class="headerlink" href="#rock-component-options" title="Permanent link">&para;</a></h3>
<p>This is a critical section that provides boolean options to choose what components of ROCK are <strong><em>installed</em></strong> and <strong><em>enabled</em></strong> during deployment.  </p>
<div class="codehilite"><pre><span></span># The following &quot;with_&quot; statements define what components of RockNSM are
# installed when running the deploy script:

with_stenographer: True
with_docket: True
with_bro: True
with_suricata: True
with_snort: True
with_suricata_update: True
with_logstash: True
with_elasticsearch: True
with_kibana: True
with_zookeeper: True
with_kafka: True
with_lighttpd: True
with_fsf: True

# The following &quot;enable_&quot; statements define what RockNSM component services
# are enabled (start automatically on system boot):

enable_stenographer: True
enable_docket: True
enable_bro: True
enable_suricata: True
enable_snort: True
enable_suricata_update: True
enable_logstash: True
enable_elasticsearch: True
enable_kibana: True
enable_zookeeper: True
enable_kafka: True
enable_lighttpd: True
enable_fsf: True
</pre></div>


<p>A good example for changing this section would involve <a href="../services/stenographer/">Stenographer</a>. Collecting raw PCAP is resource and <em><strong>storage intensive</strong></em>.  You're machine may not be able to handle that and if you just wanted to focus on network logs, then you would set both options in the config file to <strong>disable</strong> installing and enabling Stenographer:  </p>
<div class="codehilite"><pre><span></span>with_stenographer: False
  ...
  ...
  ...
enable_stenographer: False
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../install/install/" title="Installation" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installation
              </span>
            </div>
          </a>
        
        
          <a href="../deployment/" title="Deployment" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Deployment
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 RockNSM
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b806dc00.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>